- name: shell
  hosts: all
  tags:
    - zsh
  tasks:
    - name: Install Zim
      shell: curl -fsSL https://raw.githubusercontent.com/zimfw/install/master/install.zsh | zsh
    - name: Install fzf
      shell: |
        git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
        ~/.fzf/install

- name: Utilities
  hosts: all
  become: yes
  tags:
    - utils
  tasks:
    - name: Install tmux
      package:
        name: tmux
        state: present

- name: Git
  hosts: all
  tags: git
  tasks:
    - name: Setup Name and Email and Editor
      shell: |
        git config --global user.email "hiepph.2406@gmail.com"
        git config --global user.name "Hiep Pham"
        git config --global core.editor "vim"

- name: Emacs
  hosts: all
  tags: emacs
  tasks:
    - name: setup go
      shell: |
        go get -v golang.org/x/tools/cmd/goimports
    - name: setup python
      shell: pip install pylint autopep8

- name: Locales
  hosts: all
  tags: locale
  become: yes
  tasks:
    - name: US localization
      shell: localedef -f UTF-8 -i en_US en_US.UTF-8


- name: Package manager
  hosts: all
  tags: pm
  become: yes
  tasks:
    - name: Install yay
      shell: |
        pacman -S --needed --noconfirm binutils make gcc
        git clone https://aur.archlinux.org/yay.git
        cd yay
        makepkg -si

    - name: Install some cool replacement packages
      shell: yay -S ripgrep fd bat

- name: ibus
  hosts: all
  tags: ibus
  become: yes
  tasks:
    - name: install ibus
      pacman:
        name: ibus,ibus-unikey
        state: present
    - name: make sure to use appropriate python to open ibus
      lineinfile:
        dest: /usr/bin/ibus-setup
        regexp: "/usr/share/ibus/setup/main.py"
        line: exec /usr/bin/python3 /usr/share/ibus/setup/main.py $@


- name: Fonts
  hosts: all
  tags: fonts
  become: yes
  tasks:
    - name: install fonts
      pacman:
        name: ttf-dejavu,ttf-unifont,ttf-liberation,noto-fonts
        state: present
