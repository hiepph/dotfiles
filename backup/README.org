* External HDD
+ Retrieve data (entire volume):

#+begin_src bash
BORG_PASSPHRASE=$(pass show borg/MacBackup) borg extract /Volumes/MacBackup/MacHome::<date>
#+end_src

+ Retrieve data (a directory):

#+begin_src bash
BORG_PASSPHRASE=$(pass show borg/MacBackup) borg extract /Volumes/MacBackup/MacHome::<date> Users/hiepph/Books
#+end_src

* AWS S3

+ =cd aws=

+ Create =.envrc= and then =direnv allow .=

#+begin_src
export AWS_ACCESS_KEY_ID=$(pass show aws/personal/ACCESS_KEY)
export AWS_SECRET_ACCESS_KEY=$(pass show aws/personal/SECRET_KEY)
#+end_src

+ Create an S3 bucket:

#+begin_src
terraform init
terraform apply
#+end_src

* GCP Cloud Storage

Manually authorize and config =gcloud= to link to the backup project's id.

** In case of accident

#+begin_src
# download the backup
gsutil -m rsync -r gs://hiepph-mac/MacHome /Volumes/MacBackup/MacHome

# extract with borg to the current folder
BORG_PASSPHRASE=$(pass show borg/MacBackup) borg extract /Volumes/MacBackup/MacHome::<date>
#+end_src

*** Issues

/This is either an attack or unsafe/ warning:[[https://borgbackup.readthedocs.io/en/stable/faq.html#this-is-either-an-attack-or-unsafe-warning][ ref]]
